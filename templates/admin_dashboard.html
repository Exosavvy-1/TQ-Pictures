{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
<h2>Admin Dashboard</h2>

<h3>Upload Image/Video</h3>
<form method="post" enctype="multipart/form-data">
    <label>Choose File (Image/Video):</label><br/>
    <input type="file" name="image_file" required /><br/>
    <label>Caption (optional):</label><br/>
    <input type="text" name="caption" /><br/>
    <label>Assign to User:</label><br/>
    <select name="user_id">
        <option value="none">Public (All Users)</option>
        {% for user in users %}
        <option value="{{ user.id }}">{{ user.full_name }} ({{ user.email }})</option>
        {% endfor %}
    </select><br/><br/>
    <button type="submit">Upload</button>
</form>

<h3>Existing Images</h3>
<ul>
    {% for img in images %}
    <li>
        <img src="{{ url_for('static', filename='uploads/' ~ img.filename) }}" alt="{{ img.caption or '' }}" width="150" />
        {% if img.caption %} - {{ img.caption }}{% endif %}
        {% if img.user_id %} (Assigned to {{ img.user.full_name if img.user else 'Unknown' }}){% else %} (Public) {% endif %}
    </li>
    {% else %}
    <p>No images uploaded yet.</p>
    {% endfor %}
</ul>
{% endblock %}
